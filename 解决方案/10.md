# 撤销操作之使用`reset`回退提交

语法格式：

```
git reset [--soft | --mixed | --hard] [commitid]
```

Tips🍒：要真正理解 reset 的三种模式，需要清楚 Git 的三个区的概念，不太理解的可以参考`Git的工作区、暂存区、版本库及工作流程`。

## 1 撤销最近一次提交(--soft)

应用场景：我们刚创建了一个commit，发现该commit中有个错误，但又不想再创建一个新的提交。

```
# 1 撤销最近一次提交，回退到上次提交，工作区和暂存区的内容保持不变
git reset --soft HEAD^

# 2 重新提交
git commit -m "..."
```

上述命令第2步还有一种更方便的方式，可参考`撤销操作之使用--amend改写单次提交`

## 2 撤销暂存区修改(--mixed,默认)

应用场景：我们想撤销刚刚使用 `git add *` 暂存的内容。

本质：会用 HEAD 指向的当前快照的内容来更新索引（暂存区）。

```
# 撤销暂存区的修改，工作区内容保持不变
git reset --mixed HEAD
# 可缩写成
git reset
```

如果只是想取消暂存的某个文件，可以使用如下命令：
```
# 撤销指定文件暂存区的修改，工作区内容保持不变
git reset --mixed HEAD <filename> #filename如果位于目录下，需要填写相对路径
# 可缩写成
git reset <filename>
```

## 3 撤销工作区的所有修改(--hard)
应用场景：想撤销工作区中所有未提交的修改内容，将暂存区与工作区都回到最近一次commit。

```
git reset --hard HEAD
```
注意⚠️：上述命令强制覆盖了工作区中的文件，请谨慎使用。
